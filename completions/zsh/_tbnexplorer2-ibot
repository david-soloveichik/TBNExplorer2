#compdef tbnexplorer2-ibot

# Zsh completion for tbnexplorer2-ibot

_tbnexplorer2_ibot() {
    local context state state_descr line
    typeset -A opt_args

    local -a options
    options=(
        '(--help -h)'{--help,-h}'[Show help message and exit]'
        '--use-4ti2[Use 4ti2 instead of Normaliz for Hilbert basis computations]'
        '--output-prefix[Prefix for output files]:prefix:'
        '--output-canonical-reactions[Generate text file showing all irreducible canonical reactions]'
        '--upper-bound-on-polymers[Compute upper bounds only for specific off-target polymers]:polymers file:_files -g "*.tbnpolys"'
        '--store-solver-inputs[Store copies of input files for debugging]'
    )

    local -a generate_tbn_option
    generate_tbn_option=(
        '--generate-tbn[Generate .tbn file with concentrations]:concentration value:_message "base concentration value":units:_tbn_units'
    )

    _arguments -C \
        "${options[@]}" \
        "${generate_tbn_option[@]}" \
        '1:TBN file:_files -g "*.tbn"' \
        '2:on-target polymers file:_files -g "*.tbnpolys"' \
        && return 0
}

# Helper function for unit completion
_tbn_units() {
    local -a units
    units=(
        'nM:nanoMolar'
        'pM:picoMolar'
        'uM:microMolar'
        'mM:milliMolar'
        'M:Molar'
    )
    _describe 'concentration units' units
}

# Register the completion
_tbnexplorer2_ibot "$@"